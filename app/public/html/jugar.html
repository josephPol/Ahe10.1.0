<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AJE10 - Jugar</title>
  <link rel="stylesheet" href="../css/jugar.css" />
  <link rel="stylesheet" href="../css/cookies.css" />
  <link rel="stylesheet" href="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css">
</head>
<body>
  <header class="topbar">
    <a href="inicio.html" class="brand">
      <div class="logo">â™Ÿ</div>
      <div class="brandName">AJE10</div>
    </a>

    <nav class="topnav">
      <a href="jugar.html" class="nav-link active">âš” JUGAR</a>
      <a href="inicio.html" class="nav-link">ğŸ  INICIO</a>
      <a href="learn.html" class="nav-link">ğŸ“š APRENDER</a>
      <a href="contact.html" class="nav-link">ğŸ’¬ CONTACTO</a>
    </nav>

    <div class="topRight">
      <button class="btn friends-header-btn" id="friendsBtn" style="display: none;" title="Amigos">
        <svg class="friends-icon" viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
          <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.64 2.47 1.78 2.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/>
        </svg>
        <span class="friends-badge" id="friendsBadgeBtn" style="display: none;">0</span>
      </button>
      <a href="login.html" class="btn auth-btn btn-secondary">Acceder</a>
      <a href="registro.html" class="btn auth-btn btn-primary">Registro</a>
      <button id="theme-toggle" class="btn-theme" aria-label="Toggle theme">ğŸŒ™</button>
    </div>
  </header>

  <main class="contenedor">

<!-- Mode Selection Screen -->
<div id="modeSelection" class="game-mode-selection">
  <section class="hero">
    <h1>âš” Juega Ajedrez Online</h1>
    <p>Elige cÃ³mo quieres jugar</p>
  </section>

  <!-- Friends Modal -->
  <div class="friends-modal-overlay" id="friendsPanel" style="display: none;">
    <div class="friends-modal">
      <div class="friends-modal-header">
        <div class="modal-title">
          <span class="title-icon">ğŸ‘¥</span>
          <h2>Mis Amigos</h2>
        </div>
        <button class="btn-close-modal" id="closeFriendsPanel">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>

      <div class="friends-tabs-modern">
        <button class="tab-modern active" data-tab="friends">
          <span class="tab-icon">ğŸ‘¤</span>
          <span>Amigos</span>
        </button>
        <button class="tab-modern" data-tab="search">
          <span class="tab-icon">ğŸ”</span>
          <span>Buscar</span>
        </button>
        <button class="tab-modern" data-tab="requests">
          <span class="tab-icon">ğŸ“©</span>
          <span>Solicitudes</span>
          <span class="badge-modern" id="requestsBadge" style="display:none;">0</span>
        </button>
      </div>

      <div class="friends-modal-body">
        <!-- Tab: Mis Amigos -->
        <div class="tab-content-modern active" id="friendsTab">
          <div class="friends-list-modern" id="friendsList">
            <div class="empty-state">
              <span class="empty-icon">ğŸ‘¥</span>
              <p>No tienes amigos agregados aÃºn</p>
              <small>Busca usuarios y envÃ­a solicitudes de amistad</small>
            </div>
          </div>
        </div>

        <!-- Tab: Buscar Usuarios -->
        <div class="tab-content-modern" id="searchTab">
          <div class="search-box-modern">
            <span class="search-icon">ğŸ”</span>
            <input type="text" id="searchUsersInput" placeholder="Buscar por nombre o email..." />
          </div>
          <div class="search-results-modern" id="searchResults">
            <div class="empty-state">
              <span class="empty-icon">ğŸ”</span>
              <p>Busca usuarios para agregarlos</p>
              <small>Escribe al menos 2 caracteres</small>
            </div>
          </div>
        </div>

        <!-- Tab: Solicitudes -->
        <div class="tab-content-modern" id="requestsTab">
          <div class="requests-list-modern" id="requestsList">
            <div class="empty-state">
              <span class="empty-icon">ğŸ“­</span>
              <p>No tienes solicitudes pendientes</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <section class="game-modes">
    <div class="game-modes-row">
      <div class="mode-card" id="createRoomBtn">
        <div class="mode-icon">ğŸ°</div>
        <h3>Crear Sala</h3>
        <p>Crea una sala privada y comparte el cÃ³digo con un amigo</p>
        <button class="btn btn-primary">Crear Sala</button>
      </div>
      <div class="mode-card" id="joinRoomBtn">
        <div class="mode-icon">ğŸšª</div>
        <h3>Unirse a Sala</h3>
        <p>Ãšnete a una sala existente con un cÃ³digo de acceso</p>
        <button class="btn btn-primary">Unirse</button>
      </div>
      <div class="mode-card">
        <div class="mode-icon">ğŸ¤–</div>
        <h3>Jugar vs Bot</h3>
        <p>Practica contra la inteligencia artificial</p>
        <a href="jugar_bot.html" class="btn btn-primary">Jugar vs IA</a>
      </div>
      <div class="mode-card">
        <div class="mode-icon">ğŸ‘¥</div>
        <h3>Jugar en local</h3>
        <p>Juega contra otra persona en el mismo dispositivo</p>
        <a href="jugar_local.html" class="btn btn-primary">Jugar en local</a>
      </div>
    </div>
  </section>
</div>

  <div style="text-align:center;margin-top:1.5rem;">
  <a class="btn btn-primary" href="play.html">Comenzar partida</a>
</div>

<div id="createRoomModal" class="chess-modal" style="display: none;">
  <div class="modal-content">
    <h2>ğŸ° Crear Nueva Sala</h2>
    <p>Comparte este cÃ³digo con tu oponente:</p>
    <div class="room-code-display" id="roomCodeDisplay">
      <span id="generatedRoomCode">------</span>
      <button class="btn-copy" id="copyRoomCode">ğŸ“‹ Copiar</button>
    </div>
    <div class="modal-actions">
      <button class="btn btn-secondary" id="cancelCreateRoom">Cancelar</button>
      <button class="btn btn-primary" id="startGameAsHost">Iniciar Partida</button>
    </div>
  </div>
</div>

<!-- Join Room Modal -->
<div id="joinRoomModal" class="chess-modal" style="display: none;">
  <div class="modal-content">
    <h2>ğŸšª Unirse a Sala</h2>
    <p>Ingresa el cÃ³digo de la sala:</p>
    <input type="text" id="roomCodeInput" class="room-code-input" placeholder="CÃ³digo de sala" maxlength="6">
    <div class="modal-actions">
      <button class="btn btn-secondary" id="cancelJoinRoom">Cancelar</button>
      <button class="btn btn-primary" id="joinRoomConfirm">Unirse</button>
    </div>
  </div>
</div>

<!-- Bot Difficulty Modal -->
<div id="botDifficultyModal" class="chess-modal" style="display: none;">
  <div class="modal-content">
    <h2>ğŸ¤– Selecciona Dificultad</h2>
    <div class="difficulty-options">
      <button class="btn btn-primary difficulty-btn" data-level="1">FÃ¡cil</button>
      <button class="btn btn-primary difficulty-btn" data-level="2">Medio</button>
      <button class="btn btn-primary difficulty-btn" data-level="3">DifÃ­cil</button>
    </div>
    <div class="modal-actions">
      <button class="btn btn-secondary" id="cancelBotGame">Cancelar</button>
    </div>
  </div>
</div>

<!-- Chess Game Screen -->
<div id="gameScreen" style="display: none;">
  <section class="chess-game-container">
    <div class="game-header">
      <div class="game-info">
        <h2 id="gameTitle">Partida de Ajedrez</h2>
        <p id="gameStatus">Turno de las blancas</p>
      </div>
      <div class="game-actions">
        <button class="btn btn-secondary" id="resignBtn">ğŸ³ï¸ Rendirse</button>
        <button class="btn btn-secondary" id="newGameBtn">ğŸ”„ Nueva Partida</button>
      </div>
    </div>
    
    <div class="chess-board-wrapper">
      <div id="chessBoard" class="chess-board"></div>
    </div>
    
    <div class="game-controls">
      <div class="move-history">
        <h3>Historial de Movimientos</h3>
        <div id="moveList" class="move-list"></div>
      </div>
      
      <div class="captured-pieces">
        <div class="captured-white">
          <h4>Capturadas Blancas:</h4>
          <div id="capturedWhite"></div>
        </div>
        <div class="captured-black">
          <h4>Capturadas Negras:</h4>
          <div id="capturedBlack"></div>
        </div>
      </div>
    </div>
  </section>
</div>

  </main>

  <footer class="footer">
    <div class="footer-container">
      <div class="footer-brand">
        <span class="footer-icon">â™Ÿ</span>
        <span class="footer-name">AJE10</span>
      </div>
      <div class="footer-links">
        <a href="jugar.html">Jugar</a>
        <a href="learn.html">Aprender</a>
        <a href="contact.html">Contacto</a>
        <a href="sobre-nosotros.html">Sobre Nosotros</a>
      </div>
      <div class="footer-copy">
        <p>&copy; 2026 AJE10</p>
        <p class="footer-slogan">â™” Juega Â· Aprende Â· Domina â™”</p>
      </div>
    </div>
  </footer>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.12.0/chess.min.js"></script>
  <script src="../js/utils.js"></script>
  <script src="../auth/auth.js"></script>
  <script src="../js/theme.js"></script>
  <script src="../js/cookies.js"></script>
  <script src="../js/friends.js"></script>
  <script src="js/chess-game.js"></script>
  </body>
</html>
