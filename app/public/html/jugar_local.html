<!DOCTYPE html>
<html lang="es">
<head>
    <script>
      // Apply theme immediately to prevent flash
      (function(){
        const theme = localStorage.getItem('chesshub_theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        if(theme === 'dark') {
          document.documentElement.classList.add('dark');
          document.documentElement.setAttribute('data-theme', 'dark');
        }
      })();
    </script>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Jugar Local - Ajedrez</title>
    <link rel="stylesheet" href="../css/main.css" />
    <link rel="stylesheet" href="../css/jugar_local.css" />
    <link rel="stylesheet" href="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css">
</head>
<body>
    <header class="topbar">
        <div class="brand">
            <div class="logo">â™Ÿ</div>
            <div class="brandName">AJE10</div>
        </div>
        <nav class="topnav">
            <a href="jugar.html" class="nav-link">âš” JUGAR</a>
            <a href="inicio.html" class="nav-link">ğŸ  INICIO</a>
            <a href="learn.html" class="nav-link">ğŸ“š APRENDER</a>
            <a href="contact.html" class="nav-link">ğŸ’¬ CONTACTO</a>
        </nav>
        <div class="topRight">
            <button id="theme-toggle" class="btn-theme" aria-label="Toggle theme">ğŸŒ™</button>
        </div>
    </header>

    <main class="contenedor">
        <section class="hero jugar-local-hero">
            <h1>â™ PARTIDA LOCAL â™</h1>
        </section>

        <section class="jugar-local-board-section">
            <div class="jugar-local-layout">
                <div class="timer-container timer-white">
                    <div class="timer-label">âšª BLANCAS</div>
                    <div class="timer-display" id="timerWhite">10:00</div>
                    <button class="resign-btn" id="resignWhite" data-color="w">Rendirse</button>
                </div>

                <aside class="move-panel">
                    <div class="move-panel__title">Historial de movimientos</div>
                    <ol id="moveList" class="move-list"></ol>
                </aside>

                <div class="jugar-local-board-frame">
                    <div id="chessBoard" class="jugar-local-board" style="width:480px; height:480px;"></div>
                </div>

                <aside class="control-panel">
                    <div class="control-panel__title">âš™ Jugabilidad</div>
                    <div class="control-group">
                        <label class="control-label">Modo de movimiento</label>
                        <div class="mode-selector">
                            <button id="mode-drag" class="mode-btn mode-btn--active" data-mode="drag">ğŸ“ Drag & Drop</button>
                            <button id="mode-click" class="mode-btn" data-mode="click">ğŸ–±ï¸ Doble Click</button>
                        </div>
                    </div>
                </aside>

                <div class="timer-container timer-black">
                    <div class="timer-label">âš« NEGRAS</div>
                    <div class="timer-display" id="timerBlack">10:00</div>
                    <button class="resign-btn" id="resignBlack" data-color="b">Rendirse</button>
                </div>
            </div>

            <!-- Panel de resultado final -->
            <div id="resultModal" class="result-modal hidden">
                <div class="result-content">
                    <h2 id="resultTitle">Â¡Partida Terminada!</h2>
                    <p id="resultMessage"></p>
                    <button id="restartBtn" class="result-btn">Nueva Partida</button>
                </div>
            </div>
        </section>
    </main>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>
    <script src="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js"></script>
    <script src="../js/jugar_local.js"></script>
    <script src="../js/theme.js"></script>
</body>
</html>
