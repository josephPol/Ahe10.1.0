<!doctype html>
<html lang="es">
<head>
  <script>
    // Apply theme immediately to prevent flash
    (function(){
      const theme = localStorage.getItem('chesshub_theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
      if(theme === 'dark') {
        document.documentElement.classList.add('dark');
        document.documentElement.setAttribute('data-theme', 'dark');
      }
    })();
  </script>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ChessHub - Jugar vs IA</title>

  <link rel="stylesheet" href="../css/jugar_bot.css" />
  <link rel="stylesheet" href="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css">
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo">â™Ÿ</div>
      <div class="brandName">Aje10</div>
    </div>

    <nav class="topnav">
      <a href="jugar.html" class="nav-link">âš” JUGAR</a>
      <a href="inicio.html" class="nav-link">ğŸ  INICIO</a>
      <a href="learn.html" class="nav-link">ğŸ“š APRENDER</a>
      <a href="contact.html" class="nav-link">ğŸ’¬ CONTACTO</a>
    </nav>

    <div class="topRight">
      <button id="theme-toggle" class="btn-theme" aria-label="Toggle theme">ğŸŒ™</button>
    </div>
  </header>

  <main class="contenedor">
    <section class="hero play-hero">
      <h1>ğŸ¤– JUGADOR vs IA ğŸ¤–</h1>
      <p id="gameSubtitle">Preparando partida...</p>
    </section>

    <section class="play-board-section">
    <div class="play-layout">
      <!-- Temporizador del Jugador (arriba a la izquierda) -->
      <div class="timer-container timer-player">
        <div class="timer-label" id="playerLabel">âšª TÃš</div>
        <div class="timer-display" id="timerPlayer">10:00</div>
        <button class="resign-btn" id="resignBtn">Rendirse</button>
      </div>

      <aside class="move-panel">
        <div class="move-panel__title">Historial de movimientos</div>
        <ol id="moveList" class="move-list"></ol>
      </aside>

      <div class="play-board-frame">
        <div id="chessBoard" class="play-board"></div>
      </div>

      <aside class="control-panel">
        <div class="control-panel__title">âš™ Jugabilidad</div>
        <div class="control-group">
          <label class="control-label">Modo de movimiento</label>
          <div class="mode-selector">
            <button id="mode-drag" class="mode-btn mode-btn--active" data-mode="drag">
              ğŸ“ Drag & Drop
            </button>
            <button id="mode-click" class="mode-btn" data-mode="click">
              ğŸ–±ï¸ Doble Click
            </button>
          </div>
        </div>
      </aside>
    </div>

    <!-- Modal de selecciÃ³n de dificultad y color -->
    <div id="setupModal" class="result-modal">
      <div class="result-content">
        <h2>Elige tu ConfiguraciÃ³n</h2>
        
        <div class="setup-section">
          <h3>ğŸ¯ Dificultad</h3>
          <div class="difficulty-selector">
            <button class="setup-btn difficulty-btn" data-difficulty="easy">
              ğŸŸ¢ FÃ¡cil
            </button>
            <button class="setup-btn difficulty-btn" data-difficulty="medium">
              ğŸŸ¡ Medio
            </button>
            <button class="setup-btn difficulty-btn" data-difficulty="hard">
              ğŸ”´ DifÃ­cil
            </button>
          </div>
        </div>

        <div class="setup-section">
          <h3>ğŸ‘‘ Tu Color</h3>
          <div class="color-selector">
            <button class="setup-btn color-btn" data-color="w">
              âšª Blancas
            </button>
            <button class="setup-btn color-btn" data-color="b">
              âš« Negras
            </button>
          </div>
        </div>

        <button id="startGameBtn" class="start-btn" disabled>Comenzar Partida</button>
      </div>
    </div>

    <!-- Panel de resultado final -->
    <div id="resultModal" class="result-modal hidden">
      <div class="result-content">
        <h2 id="resultTitle">Â¡Partida Terminada!</h2>
        <p id="resultMessage"></p>
        <button id="restartBtn" class="result-btn">Nueva Partida</button>
      </div>
    </div>
  </section>

  </main>

  <!-- Scripts -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.12.0/chess.min.js"></script>

  <script src="../js/jugar_bot.js"></script>
  <script src="../js/theme.js"></script>
</body>
</html>
